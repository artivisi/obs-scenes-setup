<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Demo Overlay</title>
    <link rel="stylesheet" href="css/main.css">
    <style>
        /* Code Demo Specific Styles */
        .code-demo-container {
            background: transparent;
        }
        
        .code-webcam {
            position: absolute;
            top: 60px;
            right: 60px;
            width: 400px;
            height: 300px;
            z-index: 10;
        }
        
        .code-area-frame {
            position: absolute;
            top: 60px;
            left: 60px;
            right: 480px; /* Leave space for webcam + margin */
            bottom: 200px;
            border: 2px solid var(--accent-color);
            border-radius: var(--border-radius);
            background: rgba(0, 0, 0, 0.05);
        }
        
        .terminal-frame {
            position: absolute;
            bottom: 60px;
            left: 60px;
            right: 480px;
            height: 120px;
            border: 2px solid #16a34a;
            border-radius: var(--border-radius);
            background: rgba(0, 0, 0, 0.8);
        }
        
        .code-info-panel {
            position: absolute;
            bottom: 200px;
            right: 60px;
            width: 400px;
            background: var(--overlay-bg);
            backdrop-filter: blur(15px);
            border: 2px solid var(--accent-color);
            border-radius: var(--border-radius);
            padding: 20px;
        }
        
        .code-info-panel h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--accent-color);
        }
        
        .code-info-panel ul {
            list-style: none;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        .code-info-panel li {
            margin-bottom: 6px;
            padding-left: 16px;
            position: relative;
        }
        
        .code-info-panel li::before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--accent-color);
        }
        
        .file-indicator {
            position: absolute;
            top: 40px;
            left: 80px;
            background: var(--overlay-bg);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid var(--accent-color);
            font-family: var(--font-mono);
        }
        
        .zoom-indicator {
            position: absolute;
            top: 40px;
            right: 480px;
            background: var(--overlay-bg);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid var(--accent-color);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .zoom-indicator.active {
            opacity: 1;
        }
        
        /* Language-specific themes */
        .java-theme .file-indicator {
            border-color: #f89820;
            background: rgba(248, 152, 32, 0.1);
        }
        
        .linux-theme .terminal-frame {
            border-color: #fcc419;
            background: rgba(0, 0, 0, 0.9);
        }
        
        .devops-theme .code-area-frame {
            border-color: #20c997;
        }
        
        /* Test mode */
        .test-mode .code-webcam {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .test-mode .code-area-frame {
            background: rgba(34, 197, 94, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .test-mode .terminal-frame {
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #16a34a;
            font-size: 1.2rem;
            font-weight: bold;
            font-family: var(--font-mono);
        }
        
        /* Animation */
        .animate-in .code-webcam {
            animation: slideInRight 0.8s ease;
        }
        
        .animate-in .code-area-frame {
            animation: slideInLeft 0.8s ease;
        }
        
        .animate-in .terminal-frame {
            animation: slideUpFade 0.8s ease 0.3s both;
        }
        
        .animate-in .code-info-panel {
            animation: slideInRight 0.8s ease 0.6s both;
        }
    </style>
</head>
<body class="code-demo-container">
    <div class="overlay-container animate-in">
        <!-- Code area frame (IDE/Editor will show behind this) -->
        <div class="code-area-frame" id="codeArea">
            <div class="test-mode">
                üíª IDE / Code Editor Area
            </div>
        </div>
        
        <!-- Terminal frame (Terminal will show behind this) -->
        <div class="terminal-frame" id="terminalArea">
            <div class="test-mode">
                $ Terminal / Console Output
            </div>
        </div>
        
        <!-- Webcam in picture-in-picture style -->
        <div class="code-webcam webcam-frame medium" id="codeWebcam">
            <div class="test-mode">
                üìπ Camera
            </div>
        </div>
        
        <!-- File/Project indicator -->
        <div class="file-indicator" id="fileIndicator">
            üìÑ Application.java
        </div>
        
        <!-- Zoom level indicator -->
        <div class="zoom-indicator" id="zoomIndicator">
            üîç 150%
        </div>
        
        <!-- Code context panel -->
        <div class="code-info-panel" id="infoPanel">
            <h3>üìã Current Focus</h3>
            <ul>
                <li>Spring Boot Application</li>
                <li>REST API Development</li>
                <li>Database Integration</li>
                <li>Testing & Validation</li>
            </ul>
        </div>
        
        <!-- Recording status -->
        <div class="recording-status" id="recordingStatus">
            REC
        </div>
        
        <!-- Topic indicator -->
        <div class="topic-indicator" id="topicIndicator">
            <span class="topic-icon">‚òï</span>
            <span class="topic-text">Java Spring Boot</span>
        </div>
        
        <!-- Macropad layer indicator -->
        <div class="macropad-indicator layer-1 active" id="macropadIndicator">
            Layer 1: Tutorial Mode
        </div>
    </div>

    <script>
        // URL parameters for customization
        const urlParams = new URLSearchParams(window.location.search);
        const testMode = urlParams.get('test') === 'true';
        const showRecording = urlParams.get('recording') === 'true';
        const language = urlParams.get('lang') || 'java';
        const filename = urlParams.get('file') || 'Application.java';
        const topic = urlParams.get('topic') || 'Java Spring Boot';
        
        // Language-specific configurations
        const languageConfig = {
            java: {
                icon: '‚òï',
                extension: '.java',
                theme: 'java-theme',
                terminal: '$ mvn spring-boot:run'
            },
            python: {
                icon: 'üêç',
                extension: '.py',
                theme: 'python-theme',
                terminal: '$ python app.py'
            },
            javascript: {
                icon: '‚ö°',
                extension: '.js',
                theme: 'js-theme',
                terminal: '$ npm start'
            },
            linux: {
                icon: 'üêß',
                extension: '.sh',
                theme: 'linux-theme',
                terminal: '$ ./script.sh'
            }
        };
        
        // Initialize overlay
        document.addEventListener('DOMContentLoaded', function() {
            const config = languageConfig[language] || languageConfig.java;
            
            // Apply theme
            document.body.classList.add(config.theme);
            
            // Handle test mode
            if (testMode) {
                document.body.classList.add('test-mode');
            }
            
            // Update elements
            updateFileName(filename);
            updateTopic(topic, config.icon);
            
            // Handle recording status
            if (showRecording) {
                document.getElementById('recordingStatus').classList.add('active');
            }
            
            // Show indicators with delay
            setTimeout(() => {
                document.getElementById('topicIndicator').classList.add('active');
            }, 1200);
        });
        
        function updateFileName(filename) {
            const fileIndicator = document.getElementById('fileIndicator');
            fileIndicator.innerHTML = `üìÑ ${filename}`;
        }
        
        function updateZoom(zoomLevel) {
            const zoomIndicator = document.getElementById('zoomIndicator');
            zoomIndicator.innerHTML = `üîç ${zoomLevel}%`;
            zoomIndicator.classList.add('active');
            
            // Auto-hide after 3 seconds
            setTimeout(() => {
                zoomIndicator.classList.remove('active');
            }, 3000);
        }
        
        function updateCodeContext(items) {
            const infoPanel = document.getElementById('infoPanel');
            const ul = infoPanel.querySelector('ul');
            ul.innerHTML = items.map(item => `<li>${item}</li>`).join('');
        }
        
        function updateTopic(newTopic, icon = '‚òï') {
            const topicText = document.querySelector('.topic-text');
            const topicIcon = document.querySelector('.topic-icon');
            if (topicText) topicText.textContent = newTopic;
            if (topicIcon) topicIcon.textContent = icon;
        }
        
        function updateRecordingStatus(isRecording) {
            const recordingStatus = document.getElementById('recordingStatus');
            if (isRecording) {
                recordingStatus.classList.add('active');
            } else {
                recordingStatus.classList.remove('active');
            }
        }
        
        function updateMacropadLayer(layerNumber, layerName) {
            const indicator = document.getElementById('macropadIndicator');
            indicator.className = `macropad-indicator layer-${layerNumber} active`;
            indicator.textContent = `Layer ${layerNumber}: ${layerName}`;
        }
        
        // Expose functions for OBS scripting
        window.obsOverlay = {
            updateFileName,
            updateZoom,
            updateCodeContext,
            updateTopic,
            updateRecordingStatus,
            updateMacropadLayer
        };
    </script>
</body>
</html>