<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screen Only Overlay</title>
    <link rel="stylesheet" href="css/main.css">
    <style>
        /* Screen Only Specific Styles */
        .screen-only-container {
            background: transparent;
        }
        
        /* Minimal overlays for full screen focus */
        .mini-webcam {
            position: absolute;
            bottom: 60px;
            right: 60px;
            width: 240px;
            height: 180px;
            opacity: 0.8;
            z-index: 10;
            transition: opacity 0.3s ease;
        }
        
        .mini-webcam:hover {
            opacity: 1;
        }
        
        .mini-webcam.hidden {
            opacity: 0;
            transform: scale(0.8);
        }
        
        /* Minimal recording indicator */
        .recording-dot {
            position: absolute;
            top: 30px;
            right: 30px;
            width: 16px;
            height: 16px;
            background: #dc2626;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(220, 38, 38, 0.5);
            opacity: 0;
        }
        
        .recording-dot.active {
            opacity: 1;
            animation: pulse-dot 2s infinite;
        }
        
        @keyframes pulse-dot {
            0% { transform: scale(1); box-shadow: 0 0 10px rgba(220, 38, 38, 0.5); }
            50% { transform: scale(1.2); box-shadow: 0 0 20px rgba(220, 38, 38, 0.8); }
            100% { transform: scale(1); box-shadow: 0 0 10px rgba(220, 38, 38, 0.5); }
        }
        
        /* Subtle progress bar */
        .progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: var(--gradient-primary);
            width: 0%;
            transition: width 0.3s ease;
            opacity: 0.7;
        }
        
        /* Minimal topic indicator - only shows on hover or when active */
        .minimal-topic {
            position: absolute;
            top: 30px;
            left: 30px;
            background: var(--overlay-bg);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid var(--accent-color);
            opacity: 0;
            transition: opacity 0.3s ease;
            max-width: 200px;
        }
        
        .minimal-topic.active {
            opacity: 0.9;
        }
        
        .minimal-topic.peek {
            animation: peek 3s ease;
        }
        
        @keyframes peek {
            0%, 100% { opacity: 0; }
            10%, 90% { opacity: 0.9; }
        }
        
        /* Zoom level indicator - appears temporarily */
        .zoom-level {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 2rem;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        
        .zoom-level.active {
            opacity: 1;
        }
        
        /* Focus frame - highlights specific areas */
        .focus-frame {
            position: absolute;
            border: 3px solid var(--accent-color);
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
            opacity: 0;
            transition: all 0.3s ease;
            pointer-events: none;
        }
        
        .focus-frame.active {
            opacity: 1;
            animation: focus-pulse 2s infinite;
        }
        
        @keyframes focus-pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.8); }
        }
        
        /* Annotation dot */
        .annotation-dot {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #f59e0b;
            border: 2px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 20;
        }
        
        .annotation-dot.active {
            opacity: 1;
            animation: dot-pulse 1.5s infinite;
        }
        
        @keyframes dot-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }
        
        /* Test mode */
        .test-mode .mini-webcam {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            font-weight: bold;
        }
        
        .test-mode::before {
            content: "Full Screen Content Area - Screen Capture Goes Here";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.3);
            text-align: center;
            pointer-events: none;
            z-index: -1;
        }
        
        /* Macropad layer indicator - minimal */
        .minimal-macropad {
            position: absolute;
            top: 30px;
            right: 60px;
            background: var(--overlay-bg);
            backdrop-filter: blur(10px);
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .minimal-macropad.active {
            opacity: 0.7;
        }
        
        .minimal-macropad.layer-0 { border: 1px solid #dc2626; }
        .minimal-macropad.layer-1 { border: 1px solid #16a34a; }
        .minimal-macropad.layer-2 { border: 1px solid #2563eb; }
        .minimal-macropad.layer-3 { border: 1px solid #ca8a04; }
    </style>
</head>
<body class="screen-only-container">
    <div class="overlay-container">
        <!-- Minimal webcam - can be hidden completely -->
        <div class="mini-webcam webcam-frame small" id="miniWebcam">
            <div class="test-mode">
                üìπ Mini Cam
            </div>
        </div>
        
        <!-- Recording dot - minimal indication -->
        <div class="recording-dot" id="recordingDot"></div>
        
        <!-- Minimal topic indicator -->
        <div class="minimal-topic" id="minimalTopic">
            <span class="topic-icon">‚òï</span>
            <span class="topic-text">Java Deep Dive</span>
        </div>
        
        <!-- Progress bar -->
        <div class="progress-bar" id="progressBar"></div>
        
        <!-- Zoom level indicator -->
        <div class="zoom-level" id="zoomLevel">
            üîç 200%
        </div>
        
        <!-- Focus frame for highlighting -->
        <div class="focus-frame" id="focusFrame"></div>
        
        <!-- Annotation dots -->
        <div class="annotation-dot" id="annotationDot1" style="top: 30%; left: 20%;"></div>
        <div class="annotation-dot" id="annotationDot2" style="top: 60%; left: 70%;"></div>
        
        <!-- Minimal macropad indicator -->
        <div class="minimal-macropad layer-1" id="minimalMacropad">
            L1
        </div>
    </div>

    <script>
        // URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const testMode = urlParams.get('test') === 'true';
        const showRecording = urlParams.get('recording') === 'true';
        const hideCam = urlParams.get('hidecam') === 'true';
        const topic = urlParams.get('topic') || 'Java Deep Dive';
        const showProgress = urlParams.get('progress') === 'true';
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            if (testMode) {
                document.body.classList.add('test-mode');
            }
            
            if (hideCam) {
                document.getElementById('miniWebcam').classList.add('hidden');
            }
            
            if (showRecording) {
                document.getElementById('recordingDot').classList.add('active');
            }
            
            if (showProgress) {
                updateProgress(25); // Example progress
            }
            
            // Update topic
            updateTopic(topic);
            
            // Show minimal indicators briefly
            setTimeout(() => {
                document.getElementById('minimalTopic').classList.add('peek');
                document.getElementById('minimalMacropad').classList.add('active');
            }, 500);
        });
        
        function toggleWebcam() {
            const miniWebcam = document.getElementById('miniWebcam');
            miniWebcam.classList.toggle('hidden');
        }
        
        function updateProgress(percentage) {
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = `${percentage}%`;
        }
        
        function showZoomLevel(level) {
            const zoomLevel = document.getElementById('zoomLevel');
            zoomLevel.textContent = `üîç ${level}%`;
            zoomLevel.classList.add('active');
            
            setTimeout(() => {
                zoomLevel.classList.remove('active');
            }, 2000);
        }
        
        function showFocusFrame(x, y, width, height) {
            const focusFrame = document.getElementById('focusFrame');
            focusFrame.style.left = `${x}px`;
            focusFrame.style.top = `${y}px`;
            focusFrame.style.width = `${width}px`;
            focusFrame.style.height = `${height}px`;
            focusFrame.classList.add('active');
        }
        
        function hideFocusFrame() {
            document.getElementById('focusFrame').classList.remove('active');
        }
        
        function addAnnotation(x, y, id = 'annotationDot1') {
            const dot = document.getElementById(id);
            dot.style.left = `${x}%`;
            dot.style.top = `${y}%`;
            dot.classList.add('active');
        }
        
        function clearAnnotations() {
            document.querySelectorAll('.annotation-dot').forEach(dot => {
                dot.classList.remove('active');
            });
        }
        
        function updateTopic(newTopic, icon = '‚òï') {
            const topicText = document.querySelector('.topic-text');
            const topicIcon = document.querySelector('.topic-icon');
            if (topicText) topicText.textContent = newTopic;
            if (topicIcon) topicIcon.textContent = icon;
        }
        
        function updateRecordingStatus(isRecording) {
            const recordingDot = document.getElementById('recordingDot');
            if (isRecording) {
                recordingDot.classList.add('active');
            } else {
                recordingDot.classList.remove('active');
            }
        }
        
        function updateMacropadLayer(layerNumber) {
            const indicator = document.getElementById('minimalMacropad');
            indicator.className = `minimal-macropad layer-${layerNumber} active`;
            indicator.textContent = `L${layerNumber}`;
        }
        
        function showTopicBriefly() {
            const topic = document.getElementById('minimalTopic');
            topic.classList.add('peek');
            setTimeout(() => {
                topic.classList.remove('peek');
            }, 3000);
        }
        
        // Expose functions for OBS scripting
        window.obsOverlay = {
            toggleWebcam,
            updateProgress,
            showZoomLevel,
            showFocusFrame,
            hideFocusFrame,
            addAnnotation,
            clearAnnotations,
            updateTopic,
            updateRecordingStatus,
            updateMacropadLayer,
            showTopicBriefly
        };
    </script>
</body>
</html>